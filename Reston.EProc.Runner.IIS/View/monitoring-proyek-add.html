<!DOCTYPE html>
<html ng-app="app">
  <head >
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Mandiri Tunas Finance</title>
    <!-- Tell the browser to be responsive to screen width -->
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
    <!-- Bootstrap 3.3.5 -->
    <link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="font-awesome/font-awesome.min.css">
    <!-- Ionicons -->
    <link rel="stylesheet" href="ionicons/ionicons.min.css">
    <!-- Theme style -->
    <link rel="stylesheet" href="dist/css/AdminLTE.min.css">
    <!-- AdminLTE Skins. Choose a skin from the css/skins
         folder instead of downloading all of them to reduce the load. -->
    <link rel="stylesheet" href="dist/css/skins/_all-skins.min.css">
	<link rel="stylesheet" href="plugins/select2/select2.min.css">
	
	<link rel="stylesheet" href="plugins/datatables/dataTables.bootstrap.css">
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

	<link href="dist/site.css" rel="stylesheet" />
	<link href="plugins/jQueryUItotop/ui.totop.css" rel="stylesheet" />
	<link rel="stylesheet" href="plugins/JQueryValidation/validationEngine.jquery.css">
	<link href="chatjs/css/jquery.chatjs.css" rel="stylesheet" /> 
	<link href="plugins/datepicker/datepicker3.css" rel="stylesheet" />
	<link rel="stylesheet" href="bootstrap/css/bootstrap-tagsinput.css">
	<link rel="stylesheet" href="dist/app.css">
	<link rel='stylesheet' href='plugins/fullcalendar/fullcalendar.min.css' />
	<link rel='stylesheet' href="datetimepicker/bootstrap-datetimepicker.css" />
		<style type="text/css">
		.dz-error-mark{
			display:none !important;
		}
		.dropzone{
			min-height: 50px;
		}
		.dropzone .dz-message {
			margin: 0em 0;
			text-align: center;
		}
		
		.clear-margin{
			margin:0 !important;
			padding-top:3px;
			padding-left:250px;
		}
</style>
  </head>
 <body class="hold-transition skin-blue sidebar-collapse sidebar-mini fixed"  data-spy="scroll" data-target="#myScrollspy">
    <div class="wrapper">

      
      <div id="header">
        <header class="main-header">
        <!-- Logo -->
        <a  class="logo">
            <!-- mini logo for sidebar mini 50x50 pixels -->
        <span class="logo-mini" style="line-height:60px;"><img src="dist/img/mtf-bg-biru.png" width="50px" /></span> 
            <!-- logo for regular state and mobile devices -->
        <span class="logo-lg"><img src="dist/img/mtf-bg-biru.png" width="100px" /></span> 
        </a>
        <!-- Header Navbar: style can be found in header.less -->
        <nav class="navbar navbar-static-top" role="navigation">
            <!-- Sidebar toggle button-->
            <a href="#" class="sidebar-toggle" data-toggle="offcanvas" role="button">
            <span class="sr-only">Toggle navigation</span>
            </a>
	        <div class="navbar-custom-menu pull-left"> 
	        <ul class="nav navbar-nav">
		       <li>	<a id="judul-page" href="#">Tambah Rencana Proyek</a></li> 
	        </ul>
	        </div>
            <div class="navbar-custom-menu">            
            <ul id="menu-top" class="nav navbar-nav" >
                <!--<li><a  id="A1" title="Simpan Ajukan" href="#" class="Setujui" style="display:none" ><i class="fa fa-fw " style="font-size:20px;"></i>Setujui</a></li>
                <li><a  id="A2" title="Simpan Ajukan" href="#" class="Tolak" style="display:none" ><i class="fa fa-fw " style="font-size:20px;"></i>Tolak</a></li>-->
                
                <li><a  id="SimpanJalankan" title="Simpan Jalankan" href="#" class="SimpanJalankan"  ><i class="fa fa-fw fa-save " style="font-size:20px;"></i>Simpan & Jalankan</a></li>
                <li><a  id="Simpan" title="Simpan" href="#" class="Simpan" ><i class="fa fa-fw fa-save " style="font-size:20px;"></i>Simpan</a></li>
                
                <!--<li><a  id="Hapus" title="Hapus" href="#" class="Hapus" style="display:none"><i class="fa fa-fw fa-trash " style="font-size:20px;"></i>Hapus</a></li>-->
            </ul>
            </div>
        </nav>
        </header>
    </div>
          <!-- Left side column. contains the logo and sidebar -->
     <div id="menu"  >
          <aside class="main-sidebar" >
            <!-- sidebar: style can be found in sidebar.less -->
             <section class="sidebar" >
			   <!-- <div class="user-panel" ng-controller="user">				
				    <div class="pull-left info">
					    <p class="title" ng-bind="user.nama"></p>
					    <p class="deskripsi" ng-bind="user.divisi"></p>
				    </div>
				    <div class="pull-right image image-profile">
					    <img alt="User Image" class="img-circle" src="{{user.logo}}" >
				    </div>
			    </div>-->
              <!-- sidebar menu: : style can be found in sidebar.less -->
              <ul class="sidebar-menu"  ng-controller="side-menu">
               <!-- <li class="header">MAIN NAVIGATION</li>-->
             
			    <li class="treeview" ng-repeat="menu in menus">
				    <a href="{{menu.url}}">
				        <i class="{{menu.css}}"></i> <span ng-bind="menu.menu"></span>
				    </a>				
			    </li>
              </ul>
            </section>
            <!-- /.sidebar -->
          </aside>
     </div>
    
    
      <!-- Content Wrapper. Contains page content -->
      <div class="content-wrapper">
    
		 <section class="content" id="section-1">
			<!-- Default box -->
				<div class="row">
						<div class="col-md-10">
							 <div class="box box-primary box-white" >
                                 <form id="form-rencana-proyek" role="form" class="jp-form">
									 <input type="hidden" id="pengadaanId" />
                                     <input type="hidden" id="isTeam" />
                                     <input type="hidden" id="isCreated" />
                                     <input type="hidden" id="status" value="draf">
								<div class="box-body">						
									<div class="row">
										<div class="col-md-10">
											<div id="notif">
											</div>
										</div>
									</div>
										<div class="row">
											<div class="col-md-12">
												<div class="panel-header-white">										
													<span class="title-header" id="section-6">Proyek</span>
												</div>
											</div>
										</div>
										<div class="row">
											<div class="form-group col-md-12">
													<label class="title">Judul:</label>
													<input type="text" class="form-control" name="Judul" disabled>
											</div>
										</div>
										<div class="row">
											<div class="form-group col-md-4">
													<label class="title">No. Pengadaan:</label>
													<input type="text" class="form-control" name="no-pengadaan" disabled>
												</div>
										</div>	
										<div class="row">
											<div class="form-group col-md-4">
													<label class="title">Pelaksana:</label>
													<input type="text" class="form-control" name="pelaksana" disabled>
												</div>
										</div>	
										<div class="row">
											<div class="col-md-12">
												<div class="panel-header-white">										
													<span class="title-header" id="section-6">Jadwal</span>
												</div>
											</div>
										</div>
                                       	<div class="row" id="jadwal_pendaftaran">
                                            <input type="hidden" class="jadwal" attr1="pendaftaran" attr2="" attr3="" />
												<div class="form-group col-md-4">
													    <label class="title">Tanggal Mulai :</label>
													    <input id="pendaftaran" nextJadwal="#pendaftaran_sampai" name="pendaftaran"  attr1="dari" type="text" class="pendaftaran form-control datepicker dateJadwal" >
												</div>
                                                <div class="form-group col-md-4">
													    <label class="title">Tanggal Selesai :</label>
													    <input id="pendaftaran_sampai" disabled="disabled" nextJadwal="#aanwijzing" beforeJadwal="#pendaftaran" type="text" name="pendaftaran" attr1="sampai" class="pendaftaran form-control datepicker dateJadwal" >
												</div>
										</div>
										<div class="row" id="" >
											<div class="col-md-12">
												<div class=" panel-header-white">
													<span class="title-header" id="section-5">Tahapan Pekerjaan</span>
												</div>
											</div>
                                            <div class="col-md-12">
												<label >
                                                    <!--<a id="addVendorItem">Tambah</a>-->
                                                     <a onclick="TambahProyekDraf()" id="" style="margin-top:10px;margin-bottom:10px" class="btn btn-sm btn-social btn-bitbucket">
                                                        <i class="fa fa-plus"></i>
                                                        Tambah Tahapan Pekerjaan
                                                        </a>
												</label>
											</div>
                                            <div class="col-md-12">
                                                <table class="table table-bordered" id="">
                                                    <thead>
                                                        <tr>
                                                            <td class="tengah text-bold">Nama Pekerjaan</td>
                                                            <td class="tengah text-bold">Nilai</td>
                                                        </tr>
                                                    </thead>
                                                </table>		
                                            </div>
										</div>
                                    <div class="row" id="">
                                        <div class="col-md-12">
                                            <div class=" panel-header-white">
                                                <span class="title-header" id="section-5">Tahapan Pembayaran</span>
                                            </div>
                                        </div>
                                        <div class="col-md-12">
                                            <label>
                                                <!--<a id="addVendorItem">Tambah</a>-->
                                                <a onclick="TambahProyekDraf()" id="" style="margin-top:10px;margin-bottom:10px" class="btn btn-sm btn-social btn-bitbucket">
                                                    <i class="fa fa-plus"></i>
                                                    Tambah Tahapan Pembayaran
                                                </a>
                                            </label>
                                        </div>
                                        <div class="col-md-12">
                                            <table class="table table-bordered" id="">
                                                <thead>
                                                    <tr>
                                                        <td class="tengah text-bold">Nama Pekerjaan</td>
                                                        <td class="tengah text-bold">Nilai</td>
                                                    </tr>
                                                </thead>
                                            </table>
                                        </div>
                                    </div>
										<div class="row">
											<div class="col-md-12">
												<div class=" panel-header-white">
													<span class="title-header" id="section-7">Personil</span>
												</div>
											</div>
                                            <div class="col-md-12">
                                                <label>
                                                    <!--<a id="addPerson-pic" class="addPerson" attr1=".listperson-pic" >Tambah PIC</a>-->
                                                    <a id="addPerson-pic" attr1=".listperson-pic" style="margin-top:10px;margin-bottom:10px" class="addPerson btn btn-sm btn-social btn-bitbucket">
                                                        <i class="fa fa-plus"></i>
                                                        Tambah PIC
                                                    </a>
                                                </label>

                                                <div class="listperson-pic">
                                                </div>
                                            </div>
										</div>

								<div class="box-footer clearfix" style="text-align:center;">
                                    <button  class="pull-middle btn btn-primary btn-lmedia Setujui" style="display:none">Setujui </button>
                                    <button  class="pull-middle btn btn-primary btn-lmedia Tolak" style="display:none">Tolak </button>
								    <button  class="pull-middle btn btn-primary btn-lmedia SimpanAjukan" style="display:none">Simpan & Ajukan <i class="fa fa-save"></i></button>
                                    <button  class="pull-middle btn btn-primary btn-lmedia Simpan" style="display:none">Simpan <i class="fa fa-save"></i></button>
                                    <button  class="pull-middle btn btn-primary btn-lmedia Hapus" style="display:none">Hapus <i class="fa fa-trash"></i></button>

								</div>
                                 </form>
							</div>
						</div>	
				</div>
		</section><!-- /.content -->
		</div>
          <aside class="control-sidebar control-sidebar-light control-sidebar-open">
        <!-- Create the tabs -->
        
            <!--<ul class="nav nav-tabs nav-stacked" id="side-kanan" >
				<li class="active"><a href="#section-1">Atas</a></li>
				<li><a href="#section-2">Anggaran</a></li>
				<li><a href="#section-3">Korespondensi Internal</a></li>
				<li><a href="#section-4">Spesifikasi</a></li>
				<li><a href="#section-5">Kandidat</a></li>
				<li><a href="#section-6">Jadwal</a></li>
				<li><a href="#section-7">Personil</a></li>
			</ul>-->
        
        <!-- Tab panes -->
      
      </aside><!-- /.control-sidebar -->
      <!-- Add the sidebar's background. This div must be placed
           immediately after the control sidebar -->
      <div class="control-sidebar-bg"></div>	
    </div><!-- ./wrapper -->
	
	 <!--chat-->
	<!--<div id="chat">
        <div class="chat-window" style="right: 10px;">
        <div class="chat-window-title">
	        <div class="text">Online (2)</div>
        </div>
        <div class="chat-window-content" style="height: 300px;">
	        <div class="chat-window-inner-content user-list" style="height: 100px;">
		        <div class="user-list-item" data-val-id="2">
			        <img class="profile-picture" src="dist/img/avatar.png">
			        <div class="profile-status online"></div>
			        <div class="content-chat">User 1</div>
		        </div>
		        <div class="user-list-item" data-val-id="2">
			        <img class="profile-picture"  src="dist/img/avatar2.png">
			        <div class="profile-status online"></div>
			        <div class="content-chat">User 2</div>
		        </div>
	        </div>
        </div>
        </div>
        <div id="divContainer">
        </div>
	</div-->>
	
	
	
 <!-- /#myModal -->

<!--sdaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaadsadsad-->

<!-- Modal -->
<div class="modal" id="dokumenup" role="dialog"  aria-hidden="true" >
  <div class="modal-dialog">
	<div class="modal-content">
	  <div class="modal-header">
		<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
		<h4 class="modal-title">Tambah Dokumen Tahapan</h4>
	  </div>
	  <div class="modal-body">
		<div class="row">
			<div class="col-md-12">
				<div class="form-group col-md-4">
					<label class="title">Nama Dokumen</label>
					<input type="text" class="form-control" name="nama-tahapan">
				</div>
			</div>
		</div>
		<div class="row">
			<div class="col-md-12">
				<div class="form-group col-md-4">
					<label class="title">Jenis Dokumen</label>
                    <select id="AturanPengadaan" class="form-control select2" name="AturanPengadaan" style="width: 100%;">
                        <option value="" selected>Dokumen Pekerjaan</option>
                        <option value="">Dokumen Pembayaran</option>
                    </select>
				</div>
			</div>
		</div>
	  </div>
	  <div class="modal-footer">
		<button type="button" id="simpanhps" class="btn btn-default ">Simpan & Lanjutkan</button>
		<button type="button" class="btn btn-default " data-dismiss="modal">Batal</button>		
	  </div>
	</div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<!--sdaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaadsadsad-->
<!--sdaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaadsadsad-->

<!-- Modal -->
<div class="modal" id="tahapanup" role="dialog"  aria-hidden="true" >
  <div class="modal-dialog">
	<div class="modal-content">
	  <div class="modal-header">
		<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
		<h4 class="modal-title">Tambah Tahapan</h4>
	  </div>
	  <div class="modal-body">
        <form id="form-tahapan-pekerjaan" role="form" class="jp-form">
            <div class="row">
                <div class="col-md-12">
                    <div class="form-group col-md-4">
                        <label class="title">Nama Tahapan</label>
                        <input type="text" class="form-control" name="nama-tahapan">
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <div class="form-group col-md-4">
                        <label class="title">Tanggal</label>
                        <input id="tanggal-tahapan" type="text" class="tanggal-tahapan form-control datepicker dateJadwal">
                    </div>
                </div>
            </div>
        </form>
</div>
	  <div class="modal-footer">
		<button type="button" onclick="" id="SimpanTahapan" class="btn btn-default ">Simpan</button>
		<button type="button" class="btn btn-default " data-dismiss="modal">Batal</button>		
	  </div>
	</div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<!--sdaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaadsadsad-->

<div class="modal" id="personilModal" role="dialog"  aria-hidden="true">
  <div class="modal-dialog">
	<div class="modal-content">
	  <div class="modal-header">
		<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
		<h4 class="modal-title">Daftar Personil</h4>
	  </div>
	  <div class="modal-body">
          <input type="hidden" id="tipe-person-list" />
		 <div class="box box-primary" ng-controller="PersonCtrl">
                <div class="box-header with-border">                  
                     <h3 class="box-title">
                         <div class="input-group">
                            <input type="text"  class="form-control" placeholder="cari personil" ng-model="search" id="search" />
                            <div class="input-group-addon"  >
                              <a href="#search"><i class="glyphicon glyphicon-search" ng-click="searchPerson()"></i></a>
                            </div>
                          </div>
                      </h3>
                </div>
                <div class="box-body">
                  <ul class="products-list pop-personil-list product-list-in-box">
                    <li class="item" ng-repeat="person in persons" ng-click="getPerson($event,person)">   
	                  <!--  <div class="product-img">
		                    <img  src="{{person.logo}}">
	                    </div>-->
	                    <div class="product-info-collaps">
		                    <input class="id-personil" type="hidden" value="{{person.Jabatan}}" />
		                    <a class="product-title nama" ng-bind="person.Nama" ></a>
		                    <span class="pegadaan-description devisi" ng-bind="person.Jabatan"></span>
	                    </div>
                    </li>
                  </ul>
                </div><!-- /.box-body -->
                <div class="box-footer text-center">
                  <a class="uppercase" id="pop-personil-next" ng-click="nextPerson($event,person)">Berikutnya</a>
                </div><!-- /.box-footer -->
              </div>
	  </div>
	  <div class="modal-footer">
		<button type="button" class="btn btn-outline " data-dismiss="modal">Batal</button>		
	  </div>
	</div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<!--modal viewer js-->
     <div id="view-doc-modal" class="modal fade" role="dialog">
        <div class="modal-dialog modal-lg">
            <input type="hidden" id="row_index" />
            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>
                <div class="modal-body">
                    <div>
                        <iframe id="docViewFrame" width="100%" style="min-height: 500px" src="" allowfullscreen webkitallowfullscreen></iframe>
                    </div>
                </div>
            </div>
        </div>
    </div>

<!-- Modal -->
<div class="modal" id="konfirmasiFile" role="dialog" FileId="" attr1=""  aria-hidden="true">
  <div class="modal-dialog">
	<div class="modal-content">
	  <div class="modal-header">
		<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
		<h4 class="modal-title">Konfirmasi</h4>
	  </div>
	  <div class="modal-footer">
        <button type="button" id="downloadFile" class="btn btn-default">Download</button>
        <button type="button" id="HapusFile" class="btn btn-default">Hapus</button>	
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>		
	  </div>
	</div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

     <!-- Modal -->
<div class="modal" id="KonfirmasiPic" role="dialog" FileId="" attr1=""  aria-hidden="true">
  <div class="modal-dialog">
	<div class="modal-content">
	  <div class="modal-header">
		<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
		<h4 class="modal-title">PIC Sudah Ada</h4>
	  </div>
	  <div class="modal-footer">        
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>		
	  </div>
	</div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<!--kilk persetujuan-->
     <!-- Modal -->
<div class="modal" id="modal-persetujuan" role="dialog" aria-hidden="true">
  <div class="modal-dialog">
	<div class="modal-content">
	  <div class="modal-header">
		<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
		<h4 class="modal-title">Konfirmasi</h4>
          <div class="modal-body">              
                Dengan menekan tombal "lanjut" dokumen pengadaan ini akan diajukan pada Departemen Head Pengadaaan untuk dimintai persetujuan
          </div>
	  </div>
	  <div class="modal-footer">
        <button type="button" id="anjukan-lanjutkan" class="btn btn-default">Lanjut</button>	
        <button type="button" class="btn btn-default" data-dismiss="modal">Batal</button>		
	  </div>
	</div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->


   <!--endviewr-->
    <!-- jQuery 2.1.4 -->
    <script src="plugins/jQuery/jQuery-2.1.4.min.js"></script>
     <script src="site.js"></script>
    <!-- Bootstrap 3.3.5 -->
    <script src="bootstrap/js/bootstrap.min.js"></script>
    <!-- SlimScroll -->
    <script src="plugins/slimScroll/jquery.slimscroll.min.js"></script>
    <!-- FastClick -->
    <script src="plugins/fastclick/fastclick.min.js"></script>
  
	<script src="plugins/datatables/jquery.dataTables.min.js"></script>
	<script src="plugins/datatables/dataTables.bootstrap.min.js"></script>
	<!--<script src="plugins/jQueryUItotop/easing.js"></script>
	<script src="plugins/jQueryUItotop/jquery.ui.totop.js"></script>
	<script src="plugins/JQueryValidation/jquery.validate.js"></script>-->
	<script src="plugins/datepicker/bootstrap-datepicker.js"></script>
	<script src="plugins/jQueryUI/jquery-ui-autocomplete.js"></script>
	<script src="plugins/accounting/accounting.js"></script>	
	<script src="plugins/bootstrap-dialog/bootstrap-dialog.min.js"></script>
	 <script src='plugins/fullcalendar/moment.min.js'></script>
    <script src='plugins/fullcalendar/fullcalendar.min.js'></script>
    <script src='plugins/fullcalendar/lang/id.js'></script>
	<script src="plugins/typeaheadjs/typeahead.bundle.min.js"></script>
	<script src="plugins/typeaheadjs/handlebars.js"></script>
	<script src="plugins/typeaheadjs/bootstrap-tagsinput.js"></script>
	 <script src="plugins/typeaheadjs/app_bs3.js"></script>
	  <script src="datetimepicker/bootstrap-datetimepicker.js"></script>
      <script src="datetimepicker/locales/bootstrap-datetimepicker.id.js"></script>
     <script src="plugins/jQueryNumber/jquery.number.js"></script>

     <script src="dist/site.js"></script>	
      <script src="dist/js/app.min.js"></script>
    <!-- <script src="chatjs/chat.js"></script>-->
     <script src="plugins/angular/angular.min.js"></script>
     <script src="blockui/jquery.blockUI.js"></script>
     <script src="dist/js/menu.js"></script>
	  <script>
	var table;
	
	

	$(function () {
	    

	    $("[name=HpsId]").number(true, 0, ",", ".");
	   $("#myNav").affix({
			offset: { 
				top: 100 
			}
	   });
	   
	 $(".tab-content").show();
	
       //  $().UItoTop({ easingType: 'easeOutQuart' });
        table=$('#example1').DataTable({
          "paging": true,
          "lengthChange": false,
          "searching": false,
          "ordering": true,
          "info": true,
          "autoWidth": true,
		  "columnDefs": [
			{ className: "rata_kanan", "targets": [ 2 ] },
			{ "width": "50%", "targets": 0 },
			{ "width": "50%", "targets": 1 },
		  ]
        });
		$("#addVendorItem").on("click", function () {
			$("#title-modal").html("Daftar Vendor");
            $("#myModal").modal("show");
         });
		$('#addVendorItem').click(function() {
				$('.iframe').attr('src','');
				$('#myModal').on('shown.bs.modal',function(){      //correct here use 'shown.bs.modal' event which comes in bootstrap3
					$(this).find('iframe').attr('src','popup-vendor-list.html');				  
					$(this).find('.modal-body').css({					  
					  height:'500px', 
					  'max-height':'100%'
					});
					$(this).find('.modal-content').css({
					 // width:'700px'
					});
				});
				$('#myModal').modal({show:true});				
		});

		$(".addPerson").on("click", function () {
			$("#title-modal").html("Daftar Personil")
			$("#tipe-person-list").val($(this).attr("attr1"));
			$("#personilModal").modal("show");
			$(".item-bg-blue-light").each(function () {
			    $(this).removeClass("item-bg-blue-light");
			});
         });
		
		

		  $("body").on("keypress",".vendor-komen",function(e){
			console.log("fun");
			if(e.which == 13) {
				console.log("enter");
				$(this).parent().text($(this).val());
			}
		  });

		  $("#side-kanan").on("click", "li", function () {
		      $("#side-kanan").find("li").each(function () {
		          $(this).removeClass("active");
		      });
		      $(this).addClass("active");
		  });
	});

    
    // tambah draf perencanaan proyek (statusnya = draft)
	function TambahProyekDraf()
	{
	    var nPengadaanId = $("#pengadaanId").val();
	    //var nStartDate = $("#pendaftaran").val();
	    var nStartDate = moment($("#pendaftaran").val(), ["D MMMM YYYY HH:mm"], "id").format("DD/MM/YYYY HH:mm");
	    //var nEnddate = $("#pendaftaran_sampai").val();
	    var nEnddate = moment($("#pendaftaran_sampai").val(), ["D MMMM YYYY HH:mm"], "id").format("DD/MM/YYYY HH:mm");
	    var nStatus = $("#status").val();

	    $.ajax({
	        method: "post",
	        url: "api/Proyek/SimpanRencanaProyek",
	        datatype: "json",
	        data: {
	            aPengadaanId: nPengadaanId,
	            aStartDate: nStartDate,
	            aEndDate: nEnddate,
                aStatus : nStatus
	        },
	        success: function (d) {
	            popuptahapan();
	        }

	    })
	}
	

	function popuptahapan()
	{
		$("#tahapanup").modal("show");
	}

	function popupdokumen()
	{
		$("#dokumenup").modal("show");	
	}
    
    // JS untuk pop Up di dalam pop up
	$(document).on('show.bs.modal', '.modal', function (event) {
	    var zIndex = 1040 + (10 * $('.modal:visible').length);
	    $(this).css('z-index', zIndex);
	    setTimeout(function () {
	        $('.modal-backdrop').not('.modal-stack').css('z-index', zIndex - 1).addClass('modal-stack');
	    }, 0);
	});

    // JS untuk ambil id pengadaan
	$(function () {
	    var PengadaanID = gup("id-pengadaan");
	    $("#pengadaanId").val(PengadaanID);
        
	    $.ajax({
	        method: "post",
	        url: "api/Proyek/TampilJudul?Id=" + PengadaanID,
	        success: function (d) {
	            console.log(d);
	            $("[name=Judul]").val(d.Judul);
	            $("[name=no-pengadaan]").val(d.NoPengadaan);
	            $("[name=pelaksana]").val(d.Pelaksana);
	        }
	    })
	})

	function loadData(PengadaanID) {
	    $.ajax({
	        method: "POST",
	        url: "Api/PengadaanE/detailPengadaan?Id=" + id_rks
	    }).done(function (data) {
	        loadHeaderPengadaan(data); // apa aja yang di tampilin

	    });
	}

          // JS untuk personil
	$(".addPerson").on("click", function () {
	    $("#title-modal").html("Daftar Personil")
	    $("#tipe-person-list").val($(this).attr("attr1"));
	    $("#personilModal").modal("show");
	    $(".item-bg-blue-light").each(function () {
	        $(this).removeClass("item-bg-blue-light");
	    });
	});

          // js url

	function gup(name, url) {
	    if (!url) url = location.href;
	    name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
	    var regexS = "[\\?&]" + name + "=([^&#]*)";
	    var regex = new RegExp(regexS);
	    var results = regex.exec(url);
	    return results == null ? null : results[1];
	}

	function getListPersonil() {
	    arrPersonilPengadaan = [];
	    $(".list-personil").each(function () {
	        objPersonilPengadaan = {};
	        objPersonilPengadaan.PersonilId = $(this).val();
	        objPersonilPengadaan.tipe = $(this).attr("attr1");
	        objPersonilPengadaan.Nama = $(this).attr("attr2");
	        objPersonilPengadaan.Jabatan = $(this).attr("attr3");
	        arrPersonilPengadaan.push(objPersonilPengadaan);
	    });
	    return arrPersonilPengadaan;
	}
    
	function LoadListPersonil(Personil, Status, xisTeam) {
	    $(".listperson-pic").html("");
	    $(".listperson-staff").html("");
	    $(".listperson-controller").html("");
	    $(".listperson-compliance").html("");
	    $(".listperson-tim").html("");
	    for (var item in Personil) {
	        if (Personil[item].tipe == "pic")
	            addLoadPersonil(Personil[item], ".listperson-pic", Status, xisTeam);
	        if (Personil[item].tipe == "staff")
	            addLoadPersonil(Personil[item], ".listperson-staff", Status, xisTeam);
	        if (Personil[item].tipe == "tim")
	            addLoadPersonil(Personil[item], ".listperson-tim", Status, xisTeam);
	        if (Personil[item].tipe == "controller")
	            addLoadPersonil(Personil[item], ".listperson-controller", Status, xisTeam);
	        if (Personil[item].tipe == "compliance")
	            addLoadPersonil(Personil[item], ".listperson-compliance", Status, xisTeam);
	    }
	}

 
	function addPersonil(item, el) {
    var peran = el.replace(".listperson-", "");
    var objPersonilPengadaan = {};
    objPersonilPengadaan.PersonilId = item.PersonilId;
    objPersonilPengadaan.tipe = peran;
    objPersonilPengadaan.Nama = item.Nama;
    objPersonilPengadaan.Jabatan = item.Jabatan;
    objPersonilPengadaan.PengadaanId = $("#pengadaanId").val();

    if (peran == "pic" && $(el).children().length > 0) {
        BootstrapDialog.show({
            title: 'Konfirmasi',
            message: 'PIC Sudah Ada!',
            buttons: [{
                label: 'Close',
                action: function (dialog) {
                    dialog.close();
                }
            }]
        });
        return false;
    }
    if (isPersonileEksisPerPeran(item.PersonilId, el) == 1) {
        BootstrapDialog.show({
            title: 'Konfirmasi',
            message: 'User yang Ingin ditambahkan Sudah Ada!',
            buttons: [{
                label: 'Close',
                action: function (dialog) {
                    dialog.close();
                }
            }]
        });
        return false;
    }

    $.ajax({
        method: "POST",
        url: "Api/PengadaanE/savePersonil",
        dataType: "json",
        data: JSON.stringify(objPersonilPengadaan),
        contentType: 'application/json; charset=utf-8'
    }).done(function (data) {
        if (data.status == 200) {
            html = '<a class="btn btn-app">' +
                    '<input type="hidden" class="list-personil" attrId="'
                        + data.Id + '" attr1="' + peran + '" attr2="' + item.Nama + '" attr3="'
                        + item.Jabatan + '" value="' + item.PersonilId + '" />' +
                    '<span class="badge bg-red remove-person"><i class="fa fa-remove"></i></span>' +
                    '<i class="fa fa-user"></i>' +
                    item.Nama +
                  '</a>';
            $(el).append(html);
        }
        else {
            alert("error");
        }
    });
   
}

function isPersonileEksis(idPersonil,elm) {
    var status = 0;
    $(".list-personil").each(function (index, el) {
        if ($.trim($(el).val()) == $.trim(idPersonil)) {
            status = 1;
            return false;
        }
    });
    return status;
}

function isPersonileEksisPerPeran(idPersonil, elm) {
    var status = 0;
    $(elm).find(".list-personil").each(function (index, el) {
        if ($.trim($(el).val()) == $.trim(idPersonil)) {
            status = 1;
            return false;
        }
    });
    return status;
}

function addLoadPersonil(item, el,status,xisTeam) {
    var peran = el.replace(".listperson-", "");
    var removeEL = '';
    if (status == 0 && xisTeam==1) {
        //removeEL = '<a class="pull-right btn-box-tool remove-person"><i class="fa fa-times"></i></a>';
        removeEL = '<span class="badge bg-red remove-person"><i class="fa fa-remove"></i></span>';
    }
    html = '<a class="btn btn-app">' +
                   '<input type="hidden" class="list-personil" attrId="'
                       + item.Id + '" attr1="' + peran + '" attr2="' + item.Nama + '" attr3="'
                       + item.Jabatan + '" value="' + item.PersonilId + '" />' +
                   removeEL +
                   '<i class="fa fa-user"></i>' +
                   item.Nama +
                 '</a>';
    $(el).append(html);
}

    // date picker

	$(".dateJadwal").datetimepicker({
	    format: "DD MMMM YYYY HH:mm",
	    locale: 'id',
	    useCurrent: false,
	    minDate: Date.now()

	}).on('dp.change', function (e) {
	    var jadwal = $(this).attr("name");
	    var nextJadwal = $(this).attr("nextJadwal");
	    var beforeJadwal = $(this).attr("beforeJadwal");
	    var thisJadwal = moment($(this).val(), ["D MMMM YYYY HH:mm"], "id");
	    if (nextJadwal != "") {
	        var jadwalNext = moment($(nextJadwal).val(), ["D MMMM YYYY HH:mm"], "id");//.format("DD/MM/YYYY HH:mm");
	        $(nextJadwal).data("DateTimePicker").minDate(e.date);
	        $(nextJadwal).removeAttr("disabled");

	        var jadwalNext = moment($(nextJadwal).val(), ["D MMMM YYYY HH:mm"], "id");
	        var diff = thisJadwal.diff(jadwalNext);

	        if ($(nextJadwal).val() != "")
	            if (diff >= 0) {
	                BootstrapDialog.show({
	                    title: 'Konfirmasi',
	                    message: 'Jadwal Tidak Boleh Lebih Besar dari Jadwal Berikutnya!',
	                    buttons: [{
	                        label: 'Close',
	                        action: function (dialog) {
	                            dialog.close();
	                        }
	                    }]
	                });
	                $(this).val("");
	            }

	    }
	    if (beforeJadwal != "") {
	        var jadwalBefore = moment($(beforeJadwal).val(), ["D MMMM YYYY HH:mm"], "id");
	        var diff = thisJadwal.diff(jadwalBefore);

	        if (diff <= 0) {
	            BootstrapDialog.show({
	                title: 'Konfirmasi',
	                message: 'Jadwal Tidak Boleh Lebih Kecil!',
	                buttons: [{
	                    label: 'Close',
	                    action: function (dialog) {
	                        dialog.close();
	                    }
	                }]
	            });
	            $(this).val("");
	        }

	        if ($(beforeJadwal).val() == "") {
	            BootstrapDialog.show({
	                title: 'Konfirmasi',
	                message: 'Isi Jadwal Sesuai Urutan!',
	                buttons: [{
	                    label: 'Close',
	                    action: function (dialog) {
	                        dialog.close();
	                    }
	                }]
	            });
	            $(this).val("");
	        }
	    }
	});

    
    // bukan gw
	  
	  function addItem(item){
			var jumRow=table.data().length;	
			var nextNo=1;
			if(jumRow>0){
				var data=table.row(jumRow-1).data();			
				nextNo=parseInt(data[0])+1;
			}
			table.row.add( [ nextNo, item[1], item[2],'<a class="btn btn-xs btn-danger remove-item" title="Hapus"><span class="fa fa-trash-o"></span></a>'] ).draw();
	 }
	  function hitungHargaItem(){
		var totalHarga=0;
		table.rows().every( function () {
			var d = this.data();
			var harga=d[2];
			d.counter++; // update data source for the row
			harga=parseInt(UnformatFloat(harga));
			this.invalidate(); // invalidate the data DataTables has cached for this row
			totalHarga=totalHarga+harga;
			
		} );
		
		
		var estimasiCost=accounting.formatNumber(totalHarga,{ thousand : "."});
		$("#estimated_cost").val(estimasiCost);
	  }
	 
	 
		app.controller('PersonCtrl', ['$scope', '$http', function ($scope, $http) {
		    $scope.persons = [];
		    //$http.get(LOGIN_PAGE + "admin/ListUser?start=0&limit=5&name=")
		    $http.get("api/pengadaane/getUsers?start=0&limit=5&name=")		    
               .then(function (response) {
                   $scope.persons = response.data.Users;
               });
		    $scope.getPerson = function ($event,person) {
		        if ($($event.currentTarget).hasClass("item-bg-blue-light")) {
		            $($event.currentTarget).removeClass("item-bg-blue-light");
		        }
		        else {
		            $($event.currentTarget).addClass("item-bg-blue-light");
		            addPersonil(person, $("#tipe-person-list").val());
		        }
		    }
		    $scope.searchPerson= function () {
		        $http.get("api/pengadaane/getUsers?start=0&limit=5&name=" + $("#search").val())
                  .then(function (response) {
                      $scope.persons = response.data.Users;
                      if (jum >= response.data.totalRecord) $("#pop-personil-next").html("");
                      else $("#pop-personil-next").html("Berikutnya");
                  });
		    }
		    $scope.nextPerson = function () {
		        var jum = $(".pop-personil-list").find("li").length;
		        $http.get("api/pengadaane/getUsers?start=" + jum + "&limit=5&name=" + $("#search").val())
                  .then(function (response) {
                      
                      $.each(response.data.Users, function (index, value) {
                          $scope.persons.push(value);
                          jum = jum + 1;
                      });
                      if (jum >= response.data.totalRecord) $("#pop-personil-next").html("");

                  });
		    }
		}]);

		/*function vendor(items) {
		  // console.log(items);
		    app.controller('VendorCtrl', ['$scope', '$http', function ($scope, $http) {
                  $scope.vendors = items;
		    }]);
		}*/
    </script>
  </body>
</html>
